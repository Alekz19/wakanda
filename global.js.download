function renderTemplate(e,t){for(var n=[],a="",o=0;o<t.length;o++)a=e,$.each(t[o],function(e,t){a=a.replace(new RegExp("{{"+e+"}}","g"),t)}),n.push(a);return n.join("")}function loadMoreReply(e){var t=$("#RepliedToMeList"),n=$("#RepliedToMePage"),a=$("#RepliedToMeLoading");(e||t.is(":visible")&&"1"!==a.val())&&(a.val("1"),$.ajax({url:WebsitePath+"/notifications/reply/page/"+n.val(),type:"GET",dataType:"json",success:function(e){if(a.val("0"),1===e.Status){var o=$("#RepliedToMePostTemplate").html();t.append(renderTemplate(o,e.ReplyArray)),n.val(parseInt(n.val())+1),0===e.ReplyArray.length&&a.val("1")}},error:function(){a.val("0")}}))}function loadMoreMention(e){var t=$("#MentionedMeList"),n=$("#MentionedMePage"),a=$("#MentionedMeLoading");(e||t.is(":visible")&&"1"!==a.val())&&(a.val("1"),$.ajax({url:WebsitePath+"/notifications/mention/page/"+n.val(),type:"GET",dataType:"json",success:function(e){if(a.val("0"),1===e.Status){var o=$("#MentionedMePostTemplate").html();t.append(renderTemplate(o,e.MentionArray)),n.val(parseInt(n.val())+1),0===e.MentionArray.length&&a.val("1")}},error:function(){a.val("0")}}))}function loadMoreInbox(e){var t=$("#InboxList"),n=$("#InboxPage"),a=$("#InboxLoading");(e||t.is(":visible")&&"1"!==a.val())&&(a.val("1"),$.ajax({url:WebsitePath+"/notifications/inbox/page/"+n.val(),type:"GET",dataType:"json",success:function(e){if(a.val("0"),1===e.Status){var o=$("#InboxTemplate").html();t.append(renderTemplate(o,e.InboxArray)),n.val(parseInt(n.val())+1),0===e.InboxArray.length&&a.val("1")}},error:function(){a.val("0")}}))}function loadMoreMessages(e){var t=$("#MessagesList"),n=$("#InboxID").val(),a=$("#MessagesPage"),o=$("#isMessagesLoading");(e||"1"!==o.val())&&(o.val("1"),$.ajax({url:WebsitePath+"/inbox/"+n+"/list/page/"+a.val(),type:"GET",dataType:"json",success:function(e){if(o.val("0"),1===e.Status){for(var n=$("#MessageTemplate").html(),i=e.MessagesArray.length-1;i>=0;i--)e.MessagesArray[i].Position=e.MessagesArray[i].IsMe?"right":"left";t.append(renderTemplate(n,e.MessagesArray)),a.val(parseInt(a.val())+1),0===e.MessagesArray.length&&o.val("1")}},error:function(){o.val("0")}}))}function CheckUserNameExist(){$("#UserName").val()?$.ajax({url:WebsitePath+"/json/user_exist",data:{UserName:$("#UserName").val()},type:"post",dataType:"json",success:function(e){0===e.Status?$("#UserName").addClass("inputnotice"):$("#UserName").removeClass("inputnotice")}}):$("#UserName").addClass("inputnotice")}function GetNotification(){var e={type:"post",cache:!1,url:WebsitePath+"/json/get_notifications",dataType:"json",async:!0,success:function(t){0!==t.Status&&ShowNotification(t.NewMessage),setTimeout(function(){$.ajax(e)},t.NewMessage>0?PushTimeoutPeriod:15000)},error:function(){setTimeout(function(){$.ajax(e)},(PushTimeoutPeriod/2))}};$.ajax(e),console.log("start getting notification at "+(new Date).toLocaleString())}function ShowNotification(e){if(e>0){document.title="("+Lang.New_Message.replace("{{NewMessage}}",e)+")"+document.title.replace(new RegExp(("\\("+Lang.New_Message+"\\)").replace("{{NewMessage}}","\\d+"),"g"),""),$("#MessageNumber").css("visibility","visible"),$("#MessageNumber").html(e);var t=!0;if(window.localStorage){var n=localStorage.getItem(Prefix+"NotificationTime");n&&(t=Math.round((new Date).getTime()/1e3)-parseInt(n)>30,console.log(t))}t&&window.Notification&&"denied"!==Notification.permission&&Notification.requestPermission(function(t){if("granted"===t){var n=new Notification(Lang.New_Message.replace("{{NewMessage}}",e),{icon:IconLink,body:Lang["All_Message"].replace("{{Messages_Count}}",e)});n.onclick=function(){window.open(document.location.protocol+"//"+location.host+WebsitePath+"/notifications/list#notifications1")},window.localStorage&&localStorage.setItem(Prefix+"NotificationTime",Math.round((new Date).getTime()/1e3)),setTimeout(function(){n.close()},PushTimeoutPeriod)}})}else document.title=document.title.replace(new RegExp(("\\("+Lang.New_Message+"\\)").replace("{{NewMessage}}","\\d+"),"g"),""),$("#MessageNumber").html("0"),$("#MessageNumber").css("visibility","hidden");return e}function loadScript(e,t){var n=document.createElement("script");n.id=md5(e),n.type="text/javascript",n.readyState?n.onreadystatechange=function(){"loaded"!==n.readyState&&"complete"!==n.readyState||(n.onreadystatechange=null,t())}:n.onload=function(){t()},n.src=e,0===$("#"+n.id).length?document.getElementsByTagName("head")[0].appendChild(n):t()}function ManageCallback(e){this.Success=function(t){1===t.Status?$(e).text(t.Message):$(e).text(t.ErrorMessage)}}function Manage(e,t,n,a,o){var i=i||window.Lang;if(!a||confirm(i.Confirm_Operation)){$(o).text("Loading");var s=new ManageCallback(o);$.ajax({url:WebsitePath+"/manage",data:{ID:e,Type:t,Action:n},cache:!1,dataType:"json",type:"POST",success:s.Success})}}function ManagePlus(e,t,n,a,o,i){var s=s||window.Lang;if(!o||confirm(s.Confirm_Operation)){$(i).text("Loading");var r=new ManageCallback(i);$.ajax({url:WebsitePath+"/manage",data:{ID:e,Type:t,Data:a,Action:n},cache:!1,dataType:"json",type:"POST",success:r.Success})}}function kd_REld__CMana_dvCa_35_dllback(e){this.Success=function(t){var n=document.getElementsByClassName(e),a=n[0].innerHTML;a=parseInt(a)+t.Message,1===t.Status?n[0].innerHTML=a:n[0].innerHTML="error"}}function _oLf__dkd_REld__Cm_ld_DSEet(e,t,n,a,o){var i=i||window.Lang;if(!a||confirm(i.Confirm_Operation)){var s=new kd_REld__CMana_dvCa_35_dllback(o);$.ajax({url:WebsitePath+"/manage",data:{ID:e,Type:t,Action:n},cache:!1,dataType:"json",type:"POST",success:s.Success})}}$(function(){function e(e){var t=window.document.location.pathname,n=t.length-e.length;return n>=0&&t.lastIndexOf(e)===n}$("#go-to-top").unbind("click"),$("#go-to-top").click(function(){return $("html, body").animate({scrollTop:0},400),!1}),t=e("/notifications/list"),n=new RegExp("/inbox/[0-9]+$").test(window.document.location.pathname);var t=e("/notifications/list"),n=new RegExp("/inbox/[0-9]+$").test(window.document.location.pathname);$(window).scroll(function(){var e=$(".btn-back-top");$(this).scrollTop()>400?e.addClass("back-show"):e.removeClass("back-show"),t&&function(){var e=$(this).scrollTop();e+$(window).height()+20>=$(document).height()&&e>20&&(loadMoreReply(!1),loadMoreMention(!1),loadMoreInbox(!1))}(),n&&function(){var e=$(this).scrollTop();e+$(window).height()+20>=$(document).height()&&e>20&&loadMoreMessages(!1)}()})}),function(e){"use strict";function t(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function n(e,n,a,o,i,s){return t((r=t(t(n,e),t(o,s)))<<(c=i)|r>>>32-c,a);var r,c}function a(e,t,a,o,i,s,r){return n(t&a|~t&o,e,t,i,s,r)}function o(e,t,a,o,i,s,r){return n(t&o|a&~o,e,t,i,s,r)}function i(e,t,a,o,i,s,r){return n(t^a^o,e,t,i,s,r)}function s(e,t,a,o,i,s,r){return n(a^(t|~o),e,t,i,s,r)}function r(e,n){e[n>>5]|=128<<n%32,e[14+(n+64>>>9<<4)]=n;var r,c,l,u,d,g=1732584193,f=-271733879,p=-1732584194,v=271733878;for(r=0;r<e.length;r+=16)c=g,l=f,u=p,d=v,g=a(g,f,p,v,e[r],7,-680876936),v=a(v,g,f,p,e[r+1],12,-389564586),p=a(p,v,g,f,e[r+2],17,606105819),f=a(f,p,v,g,e[r+3],22,-1044525330),g=a(g,f,p,v,e[r+4],7,-176418897),v=a(v,g,f,p,e[r+5],12,1200080426),p=a(p,v,g,f,e[r+6],17,-1473231341),f=a(f,p,v,g,e[r+7],22,-45705983),g=a(g,f,p,v,e[r+8],7,1770035416),v=a(v,g,f,p,e[r+9],12,-1958414417),p=a(p,v,g,f,e[r+10],17,-42063),f=a(f,p,v,g,e[r+11],22,-1990404162),g=a(g,f,p,v,e[r+12],7,1804603682),v=a(v,g,f,p,e[r+13],12,-40341101),p=a(p,v,g,f,e[r+14],17,-1502002290),f=a(f,p,v,g,e[r+15],22,1236535329),g=o(g,f,p,v,e[r+1],5,-165796510),v=o(v,g,f,p,e[r+6],9,-1069501632),p=o(p,v,g,f,e[r+11],14,643717713),f=o(f,p,v,g,e[r],20,-373897302),g=o(g,f,p,v,e[r+5],5,-701558691),v=o(v,g,f,p,e[r+10],9,38016083),p=o(p,v,g,f,e[r+15],14,-660478335),f=o(f,p,v,g,e[r+4],20,-405537848),g=o(g,f,p,v,e[r+9],5,568446438),v=o(v,g,f,p,e[r+14],9,-1019803690),p=o(p,v,g,f,e[r+3],14,-187363961),f=o(f,p,v,g,e[r+8],20,1163531501),g=o(g,f,p,v,e[r+13],5,-1444681467),v=o(v,g,f,p,e[r+2],9,-51403784),p=o(p,v,g,f,e[r+7],14,1735328473),f=o(f,p,v,g,e[r+12],20,-1926607734),g=i(g,f,p,v,e[r+5],4,-378558),v=i(v,g,f,p,e[r+8],11,-2022574463),p=i(p,v,g,f,e[r+11],16,1839030562),f=i(f,p,v,g,e[r+14],23,-35309556),g=i(g,f,p,v,e[r+1],4,-1530992060),v=i(v,g,f,p,e[r+4],11,1272893353),p=i(p,v,g,f,e[r+7],16,-155497632),f=i(f,p,v,g,e[r+10],23,-1094730640),g=i(g,f,p,v,e[r+13],4,681279174),v=i(v,g,f,p,e[r],11,-358537222),p=i(p,v,g,f,e[r+3],16,-722521979),f=i(f,p,v,g,e[r+6],23,76029189),g=i(g,f,p,v,e[r+9],4,-640364487),v=i(v,g,f,p,e[r+12],11,-421815835),p=i(p,v,g,f,e[r+15],16,530742520),f=i(f,p,v,g,e[r+2],23,-995338651),g=s(g,f,p,v,e[r],6,-198630844),v=s(v,g,f,p,e[r+7],10,1126891415),p=s(p,v,g,f,e[r+14],15,-1416354905),f=s(f,p,v,g,e[r+5],21,-57434055),g=s(g,f,p,v,e[r+12],6,1700485571),v=s(v,g,f,p,e[r+3],10,-1894986606),p=s(p,v,g,f,e[r+10],15,-1051523),f=s(f,p,v,g,e[r+1],21,-2054922799),g=s(g,f,p,v,e[r+8],6,1873313359),v=s(v,g,f,p,e[r+15],10,-30611744),p=s(p,v,g,f,e[r+6],15,-1560198380),f=s(f,p,v,g,e[r+13],21,1309151649),g=s(g,f,p,v,e[r+4],6,-145523070),v=s(v,g,f,p,e[r+11],10,-1120210379),p=s(p,v,g,f,e[r+2],15,718787259),f=s(f,p,v,g,e[r+9],21,-343485551),g=t(g,c),f=t(f,l),p=t(p,u),v=t(v,d);return[g,f,p,v]}function c(e){var t,n="";for(t=0;t<32*e.length;t+=8)n+=String.fromCharCode(e[t>>5]>>>t%32&255);return n}function l(e){var t,n=[];for(n[(e.length>>2)-1]=void 0,t=0;t<n.length;t+=1)n[t]=0;for(t=0;t<8*e.length;t+=8)n[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return n}function u(e){var t,n,a="0123456789abcdef",o="";for(n=0;n<e.length;n+=1)t=e.charCodeAt(n),o+=a.charAt(t>>>4&15)+a.charAt(15&t);return o}function d(e){return unescape(encodeURIComponent(e))}function g(e){return c(r(l(t=d(e)),8*t.length));var t}function f(e,t){return function(e,t){var n,a,o=l(e),i=[],s=[];for(i[15]=s[15]=void 0,o.length>16&&(o=r(o,8*e.length)),n=0;16>n;n+=1)i[n]=909522486^o[n],s[n]=1549556828^o[n];return a=r(i.concat(l(t)),512+8*t.length),c(r(s.concat(a),640))}(d(e),d(t))}function p(e,t,n){return t?n?f(t,e):u(f(t,e)):n?g(e):u(g(e))}"function"==typeof define&&define.amd?define(function(){return p}):e.md5=p}(this);
!function(a){a.fn.extend({easyResponsiveTabs:function(t){var e={type:"default",width:"auto",fit:!0,closed:!1,activate:function(){}},t=a.extend(e,t),s=t,i=s.type,n=s.fit,r=s.width,c="vertical",o="accordion",d=window.location.hash,l=!(!window.history||!history.replaceState);a(this).bind("tabactivate",function(a,e){"function"==typeof t.activate&&t.activate.call(e,a)}),this.each(function(){function e(){i==c&&s.addClass("resp-vtabs"),1==n&&s.css({width:"100%",margin:"0px"}),i==o&&(s.addClass("resp-easy-accordion"),s.find(".resp-tabs-list").css("display","none"))}var s=a(this),p=s.find("ul.resp-tabs-list"),b=s.attr("id");s.find("ul.resp-tabs-list li").addClass("resp-tab-item"),s.css({display:"block",width:r}),s.find(".resp-tabs-container > div").addClass("resp-tab-content"),e();var v;s.find(".resp-tab-content").before("<h2 class='resp-accordion' role='tab'><span class='resp-arrow'></span></h2>");var f=0;s.find(".resp-accordion").each(function(){v=a(this);var t=s.find(".resp-tab-item:eq("+f+")"),e=s.find(".resp-accordion:eq("+f+")");e.append(t.html()),e.data(t.data()),v.attr("aria-controls","tab_item-"+f),f++});var h,u=0;s.find(".resp-tab-item").each(function(){$tabItem=a(this),$tabItem.attr("aria-controls","tab_item-"+u),$tabItem.attr("role","tab");var t=0;s.find(".resp-tab-content").each(function(){h=a(this),h.attr("aria-labelledby","tab_item-"+t),t++}),u++});var C=0;if(""!=d){var m=d.match(new RegExp(b+"([0-9]+)"));null!==m&&2===m.length&&(C=parseInt(m[1],10)-1,C>u&&(C=0))}a(s.find(".resp-tab-item")[C]).addClass("resp-tab-active"),t.closed===!0||"accordion"===t.closed&&!p.is(":visible")||"tabs"===t.closed&&p.is(":visible")?a(s.find(".resp-tab-content")[C]).addClass("resp-tab-content-active resp-accordion-closed"):(a(s.find(".resp-accordion")[C]).addClass("resp-tab-active"),a(s.find(".resp-tab-content")[C]).addClass("resp-tab-content-active").attr("style","display:block")),s.find("[role=tab]").each(function(){var t=a(this);t.click(function(){var t=a(this),e=t.attr("aria-controls");if(t.hasClass("resp-accordion")&&t.hasClass("resp-tab-active"))return s.find(".resp-tab-content-active").slideUp("",function(){a(this).addClass("resp-accordion-closed")}),t.removeClass("resp-tab-active"),!1;if(!t.hasClass("resp-tab-active")&&t.hasClass("resp-accordion")?(s.find(".resp-tab-active").removeClass("resp-tab-active"),s.find(".resp-tab-content-active").slideUp().removeClass("resp-tab-content-active resp-accordion-closed"),s.find("[aria-controls="+e+"]").addClass("resp-tab-active"),s.find(".resp-tab-content[aria-labelledby = "+e+"]").slideDown().addClass("resp-tab-content-active")):(s.find(".resp-tab-active").removeClass("resp-tab-active"),s.find(".resp-tab-content-active").removeAttr("style").removeClass("resp-tab-content-active").removeClass("resp-accordion-closed"),s.find("[aria-controls="+e+"]").addClass("resp-tab-active"),s.find(".resp-tab-content[aria-labelledby = "+e+"]").addClass("resp-tab-content-active").attr("style","display:block")),t.trigger("tabactivate",t),l){var i=window.location.hash,n=b+(parseInt(e.substring(9),10)+1).toString();if(""!=i){var r=new RegExp(b+"[0-9]+");n=null!=i.match(r)?i.replace(r,n):i+"|"+n}else n="#"+n;history.replaceState(null,null,n)}})}),a(window).resize(function(){s.find(".resp-accordion-closed").removeAttr("style")})})}})}(jQuery);